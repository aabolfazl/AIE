<!DOCTYPE html>
<html lang="en-us"
  dir="ltr">

  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width">



<link rel="icon" type="image/ico" href="http://localhost:1313//favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313//favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313//favicon-32x32.png">
<link rel="icon" type="image/png" sizes="192x192" href="http://localhost:1313//android-chrome-192x192.png">
<link rel="apple-touch-icon" sizes="180x180" href="http://localhost:1313//apple-touch-icon.png">

<meta name="description" content=""/>

<title>
    
    Vortex: A Load-Balancing in C&#43;&#43; using IO_URING, Introduction | An Inspired Engineer
    
</title>

<link rel="canonical" href="http://localhost:1313/posts/vortex/"/>

<meta property="og:url" content="http://localhost:1313/posts/vortex/">
  <meta property="og:site_name" content="An Inspired Engineer">
  <meta property="og:title" content="Vortex: A Load-Balancing in C&#43;&#43; using IO_URING, Introduction">
  <meta property="og:description" content="Introduction # Vortex is a learning-focused project that explores Linux Networking and Concurrency in C&#43;&#43;. The goal of the project is to build a proficient load-balancing web server to understand the complexities of networking at the OS level.
In this posts series, I‚Äôll walk you through the architecture of Vortex, how it handles load balancing, and some of the key challenges I faced while implementing the solution in C&#43;&#43; and Linux Networking.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-11-20T14:33:19+03:00">
    <meta property="article:modified_time" content="2024-11-20T14:33:19+03:00">
    <meta property="article:tag" content="Vortex">
    <meta property="article:tag" content="C&#43;&#43;">
    <meta property="article:tag" content="Linux Networking">
    <meta property="article:tag" content="Concurrency">
    <meta property="article:tag" content="Load Balancer">













<link rel="stylesheet" href="/assets/combined.min.186794b3399a702d3092949042cdc215dea303c17e71e7c0254768448de11db8.css" media="all">





  </head>

  

  
  
  

  <body class="auto">

    <div class="content">
      <header>
        

<div class="header">

    

    <h1 class="header-title">
        <a href="http://localhost:1313/">An Inspired Engineer</a>
    </h1>

    <div class="flex">
        

        
        
      
        <p class="small ">
            <a href="/" >
                /home
            </a>
        </p>
        
      
        <p class="small ">
            <a href="/posts" >
                /blog
            </a>
        </p>
        
      
        <p class="small ">
            <a href="/now" >
                /now
            </a>
        </p>
        
      
        <p class="small ">
            <a href="/reading-list" >
                /reading list
            </a>
        </p>
        
        
    </div>

    

</div>

      </header>

      <main class="main">
        





<div class="breadcrumbs">
    
    <a href="/">Home</a>
    <span class="breadcrumbs-separator"> > </span>
    
    <a href="/posts/">Posts</a>
    <span class="breadcrumbs-separator"> > </span>
    
    <a class="breadcrumbs-current" href="/posts/vortex/">Vortex: A Load-Balancing in C&#43;&#43; using IO_URING, Introduction</a>
</div>



<div >

  <div class="single-intro-container">

    

    <h1 class="single-title">Vortex: A Load-Balancing in C&#43;&#43; using IO_URING, Introduction</h1>
    

    

    <p class="single-readtime">
      
      
      
      <time datetime="2024-11-20T14:33:19&#43;03:00">November 20, 2024</time>
      

      
    </p>

  </div>

  

  
  

  <div class="single-tags">
    
    <span>
      <a href="http://localhost:1313/tags/vortex/">#Vortex</a>
    </span>
    
    
    <span>
      <a href="http://localhost:1313/tags/c&#43;&#43;/">#C&#43;&#43;</a>
    </span>
    
    
    <span>
      <a href="http://localhost:1313/tags/linux-networking/">#Linux Networking</a>
    </span>
    
    
    <span>
      <a href="http://localhost:1313/tags/concurrency/">#Concurrency</a>
    </span>
    
    
    <span>
      <a href="http://localhost:1313/tags/load-balancer/">#Load Balancer</a>
    </span>
    
    
  </div>

  
  

  

  

  

  <div class="single-content">
    <h2 class="heading" id="introduction">
  Introduction
  <a href="#introduction">#</a>
</h2>
<p>Vortex is a learning-focused project that explores <strong>Linux Networking</strong> and <strong>Concurrency</strong> in C++. The goal of the project is to build a proficient <strong>load-balancing web server</strong> to understand the complexities of networking at the OS level.</p>
<p>In this posts series, I‚Äôll walk you through the architecture of Vortex, how it handles load balancing, and some of the key challenges I faced while implementing the solution in C++ and Linux Networking.</p>
<h2 class="heading" id="project-structure">
  Project Structure
  <a href="#project-structure">#</a>
</h2>
<p>After a lot of research and reading Envoy Proxy <a href="https://github.com/envoyproxy/envoy">Github</a> source code and documentation I decided to implement a similar architecture to Envoy Proxy. also I was inspired by Nginx<a href="https://github.com/nginx/nginx">Github</a> design to implement a more efficient and scalable system using their event loop model.</p>
<p>The architecture consists of three main components that contain the core business logic:</p>
<h4 class="heading" id="1-listener-component">
  1. Listener Component
  <a href="#1-listener-component">#</a>
</h4>
<p>Responsible for accepting new connections based on configuration. It listens on specified ports and forwards accepted connections to the Balancer component.</p>
<h4 class="heading" id="2-balancer-component-cluster-of-backends">
  2. Balancer Component (Cluster of Backends)
  <a href="#2-balancer-component-cluster-of-backends">#</a>
</h4>
<p>Manages connections to upstream servers by:</p>
<ul>
<li>Maintaining a pool of connections to upstream servers</li>
<li>Observing server status from the Health Checker</li>
<li>Implementing routing logic based on configuration and server health</li>
<li>Making decisions about upstream server selection</li>
</ul>
<h4 class="heading" id="3-health-checker-component">
  3. Health Checker Component
  <a href="#3-health-checker-component">#</a>
</h4>
<p>Operates independently to:</p>
<ul>
<li>Monitor upstream server health based on configuration</li>
<li>Maintain its own socket connections to upstream servers</li>
<li>Continuously check upstream server status</li>
<li>Notify Balancer of any status changes</li>
</ul>
<p>Additionally, we have shared utility components that support the main components:</p>
<h4 class="heading" id="shared-components">
  Shared Components
  <a href="#shared-components">#</a>
</h4>
<ul>
<li>EventLoop (epoll, io_uring)</li>
<li>Buffer Pool (memory management)</li>
<li>Configuration Manager (reading and updating configuration)</li>
<li>Other utilities (logging, metrics, etc.)</li>
</ul>
<h3 class="heading" id="architecture-benefits">
  Architecture Benefits
  <a href="#architecture-benefits">#</a>
</h3>
<p>This modular design offers several advantages:</p>
<ol>
<li><strong>Flexible Listener-Balancer Mapping</strong>: You can have multiple listeners sending traffic to a single balancer cluster, or a single listener distributing to multiple balancer clusters</li>
<li><strong>Independent Health Checking</strong>: The health checker operates outside the cluster, allowing shared server monitoring across clusters</li>
<li><strong>Scalable Component Structure</strong>: Each component can be scaled independently based on needs</li>
</ol>
<h2 class="heading" id="conclusion">
  Conclusion
  <a href="#conclusion">#</a>
</h2>
<p>Vortex is a learning-focused project that explores the implementation of a Layer 4 load balancer using modern C++ and io_uring. By studying and drawing inspiration from production-grade systems like Envoy and Nginx, this project aims to understand the fundamentals of:</p>
<ul>
<li>Network programming at the transport layer (TCP/UDP)</li>
<li>Modern C++ features and their practical applications</li>
<li>Event-driven I/O using io_uring</li>
<li>Process-per-core architecture patterns</li>
</ul>
<p>While this is primarily a learning exercise and remains under development üèóÔ∏è, it serves as a practical way to understand how load balancers work at a fundamental level. Through this project, I&rsquo;m gaining hands-on experience with systems programming concepts and modern Linux networking features.</p>
<p>Stay tuned for upcoming posts where I&rsquo;ll share my learning journey and dive into specific implementation details. You can find the source code on <a href="https://github.com/aabolfazl/Vortex">GitHub</a>.</p>
<p>Feel free to reach out if you have any questions or want to discuss load balancer implementations!</p>
<p>Thank you for reading!</p>

    
  </div>

  


  

  
  

  

  

  
  <div class="back-to-top">
    <a href="#top">
      back to top
    </a>
  </div>
  

</div>


      </main>
    </div>

    <footer>
      

    
    <p>Powered by
        <a href="https://gohugo.io/">Hugo</a>
        and
        <a href="https://github.com/tomfran/typo">tomfran/typo</a>
    </p>
    
    
    



    </footer>
    
  </body>

  <script>

  function isAuto() {
    return document.body.classList.contains("auto");
  }

  function setTheme() {
    if (!isAuto()) {
      return
    }

    document.body.classList.remove("auto");
    let cls = "light";
    if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
      cls = "dark";
    }

    document.body.classList.add(cls);
  }

  function invertBody() {
    document.body.classList.toggle("dark");
    document.body.classList.toggle("light");
  }

  if (isAuto()) {
    window.matchMedia('(prefers-color-scheme: dark)').addListener(invertBody);
  }

  setTheme();

</script>

</html>